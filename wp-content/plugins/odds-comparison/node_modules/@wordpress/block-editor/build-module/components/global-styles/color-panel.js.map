{"version":3,"sources":["@wordpress/block-editor/src/components/global-styles/color-panel.js"],"names":["classnames","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalHStack","HStack","__experimentalZStack","ZStack","__experimentalDropdownContentWrapper","DropdownContentWrapper","TabPanel","ColorIndicator","Flex","FlexItem","Dropdown","Button","useCallback","__","sprintf","ColorGradientControl","useColorsPerOrigin","useGradientsPerOrigin","getValueFromVariable","setImmutably","useHasColorPanel","settings","hasTextPanel","useHasTextPanel","hasBackgroundPanel","useHasBackgroundPanel","hasLinkPanel","useHasLinkPanel","hasHeadingPanel","useHasHeadingPanel","hasButtonPanel","useHasButtonPanel","hasCaptionPanel","useHasCaptionPanel","colors","color","text","length","custom","link","caption","gradients","heading","customGradient","button","background","ColorToolsPanel","resetAllFilter","onChange","value","panelId","children","resetAll","updatedValue","DEFAULT_CONTROLS","popoverProps","placement","offset","shift","LabeledColorIndicators","indicators","label","map","indicator","index","ColorPanelTab","isGradient","inheritedValue","userValue","setValue","colorGradientControlSettings","undefined","ColorPanelDropdown","hasValue","resetValue","isShownByDefault","tabs","tabConfigs","key","tabLabel","name","title","onToggle","isOpen","toggleProps","onClick","className","tab","selectedTab","find","t","ColorPanel","as","Wrapper","defaultControls","areCustomSolidsEnabled","areCustomGradientsEnabled","hasSolidColors","hasGradientColors","decodeValue","rawValue","encodeColorValue","colorValue","allColors","flatMap","originColors","colorObject","slug","encodeGradientValue","gradientValue","allGradients","originGradients","gradientObject","gradient","showBackgroundPanel","backgroundColor","userBackgroundColor","userGradient","hasBackground","setBackgroundColor","newColor","newValue","setGradient","newGradient","resetBackground","showLinkPanel","linkColor","elements","userLinkColor","setLinkColor","hoverLinkColor","userHoverLinkColor","setHoverLinkColor","hasLink","resetLink","showTextPanel","textColor","userTextColor","hasTextColor","setTextColor","changedObject","resetTextColor","showPanel","previousValue","reduce","acc","element","items","filter","Boolean","forEach","elementBackgroundColor","elementGradient","elementTextColor","elementBackgroundUserColor","elementGradientUserColor","elementTextUserColor","hasElement","resetElement","setElementTextColor","newTextColor","setElementBackgroundColor","newBackgroundColor","setElementGradient","supportsTextColor","supportsBackground","push","item","disableCustomColors","disableCustomGradients"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tTabPanel,\n\tColorIndicator,\n\tFlex,\n\tFlexItem,\n\tDropdown,\n\tButton,\n} from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\nimport { useColorsPerOrigin, useGradientsPerOrigin } from './hooks';\nimport { getValueFromVariable } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nexport function useHasColorPanel( settings ) {\n\tconst hasTextPanel = useHasTextPanel( settings );\n\tconst hasBackgroundPanel = useHasBackgroundPanel( settings );\n\tconst hasLinkPanel = useHasLinkPanel( settings );\n\tconst hasHeadingPanel = useHasHeadingPanel( settings );\n\tconst hasButtonPanel = useHasButtonPanel( settings );\n\tconst hasCaptionPanel = useHasCaptionPanel( settings );\n\n\treturn (\n\t\thasTextPanel ||\n\t\thasBackgroundPanel ||\n\t\thasLinkPanel ||\n\t\thasHeadingPanel ||\n\t\thasButtonPanel ||\n\t\thasCaptionPanel\n\t);\n}\n\nexport function useHasTextPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.text &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasLinkPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.link &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasCaptionPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.caption &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasHeadingPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.heading &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasButtonPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.button &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasBackgroundPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.background &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nfunction ColorToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Color' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper\n\t\t\tclassName=\"color-block-support-panel\"\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t>\n\t\t\t<div className=\"color-block-support-panel__inner-wrapper\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\ttext: true,\n\tbackground: true,\n\tlink: true,\n\theading: true,\n\tbutton: true,\n\tcaption: true,\n};\n\nconst popoverProps = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n};\n\nconst LabeledColorIndicators = ( { indicators, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ZStack isLayered={ false } offset={ -8 }>\n\t\t\t{ indicators.map( ( indicator, index ) => (\n\t\t\t\t<Flex key={ index } expanded={ false }>\n\t\t\t\t\t<ColorIndicator colorValue={ indicator } />\n\t\t\t\t</Flex>\n\t\t\t) ) }\n\t\t</ZStack>\n\t\t<FlexItem\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-name\"\n\t\t\ttitle={ label }\n\t\t>\n\t\t\t{ label }\n\t\t</FlexItem>\n\t</HStack>\n);\n\nfunction ColorPanelTab( {\n\tisGradient,\n\tinheritedValue,\n\tuserValue,\n\tsetValue,\n\tcolorGradientControlSettings,\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...colorGradientControlSettings }\n\t\t\tshowTitle={ false }\n\t\t\tenableAlpha\n\t\t\t__experimentalIsRenderedInSidebar\n\t\t\tcolorValue={ isGradient ? undefined : inheritedValue }\n\t\t\tgradientValue={ isGradient ? inheritedValue : undefined }\n\t\t\tonColorChange={ isGradient ? undefined : setValue }\n\t\t\tonGradientChange={ isGradient ? setValue : undefined }\n\t\t\tclearable={ inheritedValue === userValue }\n\t\t\theadingLevel={ 3 }\n\t\t/>\n\t);\n}\n\nfunction ColorPanelDropdown( {\n\tlabel,\n\thasValue,\n\tresetValue,\n\tisShownByDefault,\n\tindicators,\n\ttabs,\n\tcolorGradientControlSettings,\n\tpanelId,\n} ) {\n\tconst tabConfigs = tabs.map( ( { key, label: tabLabel } ) => {\n\t\treturn {\n\t\t\tname: key,\n\t\t\ttitle: tabLabel,\n\t\t};\n\t} );\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\n\t\t\thasValue={ hasValue }\n\t\t\tlabel={ label }\n\t\t\tonDeselect={ resetValue }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\tconst toggleProps = {\n\t\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\n\t\t\t\t\t\t\t{ 'is-open': isOpen }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t\t'aria-label': sprintf(\n\t\t\t\t\t\t\t/* translators: %s is the type of color property, e.g., \"background\" */\n\t\t\t\t\t\t\t__( 'Color %s styles' ),\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button { ...toggleProps }>\n\t\t\t\t\t\t\t<LabeledColorIndicators\n\t\t\t\t\t\t\t\tindicators={ indicators }\n\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\n\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\n\t\t\t\t\t\t\t{ tabs.length === 1 && (\n\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t{ ...tabs[ 0 ] }\n\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ tabs.length > 1 && (\n\t\t\t\t\t\t\t\t<TabPanel tabs={ tabConfigs }>\n\t\t\t\t\t\t\t\t\t{ ( tab ) => {\n\t\t\t\t\t\t\t\t\t\tconst selectedTab = tabs.find(\n\t\t\t\t\t\t\t\t\t\t\t( t ) => t.key === tab.name\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\tif ( ! selectedTab ) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t\t\t\t{ ...selectedTab }\n\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n\nexport default function ColorPanel( {\n\tas: Wrapper = ColorToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tchildren,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\tconst areCustomSolidsEnabled = settings?.color?.custom;\n\tconst areCustomGradientsEnabled = settings?.color?.customGradient;\n\tconst hasSolidColors = colors.length > 0 || areCustomSolidsEnabled;\n\tconst hasGradientColors = gradients.length > 0 || areCustomGradientsEnabled;\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst encodeGradientValue = ( gradientValue ) => {\n\t\tconst allGradients = gradients.flatMap(\n\t\t\t( { gradients: originGradients } ) => originGradients\n\t\t);\n\t\tconst gradientObject = allGradients.find(\n\t\t\t( { gradient } ) => gradient === gradientValue\n\t\t);\n\t\treturn gradientObject\n\t\t\t? 'var:preset|gradient|' + gradientObject.slug\n\t\t\t: gradientValue;\n\t};\n\n\t// BackgroundColor\n\tconst showBackgroundPanel = useHasBackgroundPanel( settings );\n\tconst backgroundColor = decodeValue( inheritedValue?.color?.background );\n\tconst userBackgroundColor = decodeValue( value?.color?.background );\n\tconst gradient = decodeValue( inheritedValue?.color?.gradient );\n\tconst userGradient = decodeValue( value?.color?.gradient );\n\tconst hasBackground = () => !! userBackgroundColor || !! userGradient;\n\tconst setBackgroundColor = ( newColor ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst setGradient = ( newGradient ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'gradient' ],\n\t\t\tencodeGradientValue( newGradient )\n\t\t);\n\t\tnewValue.color.background = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst resetBackground = () => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\n\t// Links\n\tconst showLinkPanel = useHasLinkPanel( settings );\n\tconst linkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.color?.text\n\t);\n\tconst userLinkColor = decodeValue( value?.elements?.link?.color?.text );\n\tconst setLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hoverLinkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst userHoverLinkColor = decodeValue(\n\t\tvalue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst setHoverLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLink = () => !! userLinkColor || !! userHoverLinkColor;\n\tconst resetLink = () => {\n\t\tlet newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue = setImmutably(\n\t\t\tnewValue,\n\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tonChange( newValue );\n\t};\n\n\t// Text Color\n\tconst showTextPanel = useHasTextPanel( settings );\n\tconst textColor = decodeValue( inheritedValue?.color?.text );\n\tconst userTextColor = decodeValue( value?.color?.text );\n\tconst hasTextColor = () => !! userTextColor;\n\tconst setTextColor = ( newColor ) => {\n\t\tlet changedObject = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'text' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tif ( textColor === linkColor ) {\n\t\t\tchangedObject = setImmutably(\n\t\t\t\tchangedObject,\n\t\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t);\n\t\t}\n\n\t\tonChange( changedObject );\n\t};\n\tconst resetTextColor = () => setTextColor( undefined );\n\n\t// Elements\n\tconst elements = [\n\t\t{\n\t\t\tname: 'caption',\n\t\t\tlabel: __( 'Captions' ),\n\t\t\tshowPanel: useHasCaptionPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'button',\n\t\t\tlabel: __( 'Button' ),\n\t\t\tshowPanel: useHasButtonPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'heading',\n\t\t\tlabel: __( 'Heading' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h1',\n\t\t\tlabel: __( 'H1' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h2',\n\t\t\tlabel: __( 'H2' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h3',\n\t\t\tlabel: __( 'H3' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h4',\n\t\t\tlabel: __( 'H4' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h5',\n\t\t\tlabel: __( 'H5' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h6',\n\t\t\tlabel: __( 'H6' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t];\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tcolor: undefined,\n\t\t\telements: {\n\t\t\t\t...previousValue?.elements,\n\t\t\t\tlink: {\n\t\t\t\t\t...previousValue?.elements?.link,\n\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t':hover': {\n\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...elements.reduce( ( acc, element ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[ element.name ]: {\n\t\t\t\t\t\t\t...previousValue?.elements?.[ element.name ],\n\t\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}, {} ),\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst items = [\n\t\tshowTextPanel && {\n\t\t\tkey: 'text',\n\t\t\tlabel: __( 'Text' ),\n\t\t\thasValue: hasTextColor,\n\t\t\tresetValue: resetTextColor,\n\t\t\tisShownByDefault: defaultControls.text,\n\t\t\tindicators: [ textColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'text',\n\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\tinheritedValue: textColor,\n\t\t\t\t\tsetValue: setTextColor,\n\t\t\t\t\tuserValue: userTextColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tshowBackgroundPanel && {\n\t\t\tkey: 'background',\n\t\t\tlabel: __( 'Background' ),\n\t\t\thasValue: hasBackground,\n\t\t\tresetValue: resetBackground,\n\t\t\tisShownByDefault: defaultControls.background,\n\t\t\tindicators: [ gradient ?? backgroundColor ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors && {\n\t\t\t\t\tkey: 'background',\n\t\t\t\t\tlabel: __( 'Solid' ),\n\t\t\t\t\tinheritedValue: backgroundColor,\n\t\t\t\t\tsetValue: setBackgroundColor,\n\t\t\t\t\tuserValue: userBackgroundColor,\n\t\t\t\t},\n\t\t\t\thasGradientColors && {\n\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\tinheritedValue: gradient,\n\t\t\t\t\tsetValue: setGradient,\n\t\t\t\t\tuserValue: userGradient,\n\t\t\t\t\tisGradient: true,\n\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t},\n\t\tshowLinkPanel && {\n\t\t\tkey: 'link',\n\t\t\tlabel: __( 'Link' ),\n\t\t\thasValue: hasLink,\n\t\t\tresetValue: resetLink,\n\t\t\tisShownByDefault: defaultControls.link,\n\t\t\tindicators: [ linkColor, hoverLinkColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'link',\n\t\t\t\t\tlabel: __( 'Default' ),\n\t\t\t\t\tinheritedValue: linkColor,\n\t\t\t\t\tsetValue: setLinkColor,\n\t\t\t\t\tuserValue: userLinkColor,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'hover',\n\t\t\t\t\tlabel: __( 'Hover' ),\n\t\t\t\t\tinheritedValue: hoverLinkColor,\n\t\t\t\t\tsetValue: setHoverLinkColor,\n\t\t\t\t\tuserValue: userHoverLinkColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t].filter( Boolean );\n\n\telements.forEach( ( { name, label, showPanel } ) => {\n\t\tif ( ! showPanel ) return;\n\n\t\tconst elementBackgroundColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradient = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst elementBackgroundUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradientUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst hasElement = () =>\n\t\t\t!! (\n\t\t\t\telementTextUserColor ||\n\t\t\t\telementBackgroundUserColor ||\n\t\t\t\telementGradientUserColor\n\t\t\t);\n\t\tconst resetElement = () => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tundefined\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tnewValue.elements[ name ].color.text = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\n\t\tconst setElementTextColor = ( newTextColor ) => {\n\t\t\tonChange(\n\t\t\t\tsetImmutably(\n\t\t\t\t\tvalue,\n\t\t\t\t\t[ 'elements', name, 'color', 'text' ],\n\t\t\t\t\tencodeColorValue( newTextColor )\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\t\tconst setElementBackgroundColor = ( newBackgroundColor ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tencodeColorValue( newBackgroundColor )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst setElementGradient = ( newGradient ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'gradient' ],\n\t\t\t\tencodeGradientValue( newGradient )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.background = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst supportsTextColor = true;\n\t\t// Background color is not supported for `caption`\n\t\t// as there isn't yet a way to set padding for the element.\n\t\tconst supportsBackground = name !== 'caption';\n\n\t\titems.push( {\n\t\t\tkey: name,\n\t\t\tlabel,\n\t\t\thasValue: hasElement,\n\t\t\tresetValue: resetElement,\n\t\t\tisShownByDefault: defaultControls[ name ],\n\t\t\tindicators:\n\t\t\t\tsupportsTextColor && supportsBackground\n\t\t\t\t\t? [\n\t\t\t\t\t\t\telementTextColor,\n\t\t\t\t\t\t\telementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\tsupportsTextColor\n\t\t\t\t\t\t\t\t? elementTextColor\n\t\t\t\t\t\t\t\t: elementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsTextColor && {\n\t\t\t\t\t\tkey: 'text',\n\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\tinheritedValue: elementTextColor,\n\t\t\t\t\t\tsetValue: setElementTextColor,\n\t\t\t\t\t\tuserValue: elementTextUserColor,\n\t\t\t\t\t},\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'background',\n\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\tinheritedValue: elementBackgroundColor,\n\t\t\t\t\t\tsetValue: setElementBackgroundColor,\n\t\t\t\t\t\tuserValue: elementBackgroundUserColor,\n\t\t\t\t\t},\n\t\t\t\thasGradientColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\t\tinheritedValue: elementGradient,\n\t\t\t\t\t\tsetValue: setElementGradient,\n\t\t\t\t\t\tuserValue: elementGradientUserColor,\n\t\t\t\t\t\tisGradient: true,\n\t\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t} );\n\t} );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ items.map( ( item ) => (\n\t\t\t\t<ColorPanelDropdown\n\t\t\t\t\tkey={ item.key }\n\t\t\t\t\t{ ...item }\n\t\t\t\t\tcolorGradientControlSettings={ {\n\t\t\t\t\t\tcolors,\n\t\t\t\t\t\tdisableCustomColors: ! areCustomSolidsEnabled,\n\t\t\t\t\t\tgradients,\n\t\t\t\t\t\tdisableCustomGradients: ! areCustomGradientsEnabled,\n\t\t\t\t\t} }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t{ children }\n\t\t</Wrapper>\n\t);\n}\n"]}