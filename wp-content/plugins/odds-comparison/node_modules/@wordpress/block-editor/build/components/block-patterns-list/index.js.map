{"version":3,"sources":["@wordpress/block-editor/src/components/block-patterns-list/index.js"],"names":["WithToolTip","showTooltip","title","children","BlockPattern","isDraggable","pattern","onClick","onHover","composite","isDragging","setIsDragging","blocks","viewportWidth","instanceId","descriptionId","draggable","onDragStart","onDragEnd","event","description","undefined","BlockPatternPlaceholder","BlockPatternList","blockPatterns","shownPatterns","onClickPattern","orientation","label","showTitlesAsTooltip","map","isShown","includes","name"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n\tTooltip,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\n\nconst WithToolTip = ( { showTooltip, title, children } ) => {\n\tif ( showTooltip ) {\n\t\treturn <Tooltip text={ title }>{ children }</Tooltip>;\n\t}\n\treturn <>{ children }</>;\n};\n\nfunction BlockPattern( {\n\tisDraggable,\n\tpattern,\n\tonClick,\n\tonHover,\n\tcomposite,\n\tshowTooltip,\n} ) {\n\tconst [ isDragging, setIsDragging ] = useState( false );\n\tconst { blocks, viewportWidth } = pattern;\n\tconst instanceId = useInstanceId( BlockPattern );\n\tconst descriptionId = `block-editor-block-patterns-list__item-description-${ instanceId }`;\n\n\treturn (\n\t\t<InserterDraggableBlocks\n\t\t\tisEnabled={ isDraggable }\n\t\t\tblocks={ blocks }\n\t\t\tisPattern={ !! pattern }\n\t\t>\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-block-patterns-list__list-item\"\n\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( true );\n\t\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\tonDragStart( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tonDragEnd={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( false );\n\t\t\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\t\t\tonDragEnd( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<WithToolTip\n\t\t\t\t\t\tshowTooltip={ showTooltip }\n\t\t\t\t\t\ttitle={ pattern.title }\n\t\t\t\t\t>\n\t\t\t\t\t\t<CompositeItem\n\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\tas=\"div\"\n\t\t\t\t\t\t\t{ ...composite }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-patterns-list__item\"\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonClick( pattern, blocks );\n\t\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseEnter={ () => {\n\t\t\t\t\t\t\t\tif ( isDragging ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonHover?.( pattern );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseLeave={ () => onHover?.( null ) }\n\t\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\tpattern.description ? descriptionId : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ ! showTooltip && (\n\t\t\t\t\t\t\t\t<div className=\"block-editor-block-patterns-list__item-title\">\n\t\t\t\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ !! pattern.description && (\n\t\t\t\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t\t\t\t{ pattern.description }\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</CompositeItem>\n\t\t\t\t\t</WithToolTip>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</InserterDraggableBlocks>\n\t);\n}\n\nfunction BlockPatternPlaceholder() {\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-list__item is-placeholder\" />\n\t);\n}\n\nfunction BlockPatternList( {\n\tisDraggable,\n\tblockPatterns,\n\tshownPatterns,\n\tonHover,\n\tonClickPattern,\n\torientation,\n\tlabel = __( 'Block Patterns' ),\n\tshowTitlesAsTooltip,\n} ) {\n\tconst composite = useCompositeState( { orientation } );\n\treturn (\n\t\t<Composite\n\t\t\t{ ...composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-patterns-list\"\n\t\t\taria-label={ label }\n\t\t>\n\t\t\t{ blockPatterns.map( ( pattern ) => {\n\t\t\t\tconst isShown = shownPatterns.includes( pattern );\n\t\t\t\treturn isShown ? (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonClick={ onClickPattern }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t\t\tcomposite={ composite }\n\t\t\t\t\t\tshowTooltip={ showTitlesAsTooltip }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<BlockPatternPlaceholder key={ pattern.name } />\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</Composite>\n\t);\n}\n\nexport default BlockPatternList;\n"]}