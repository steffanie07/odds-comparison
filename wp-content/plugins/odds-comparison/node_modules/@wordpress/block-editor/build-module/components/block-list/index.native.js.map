{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/index.native.js"],"names":["View","Platform","TouchableWithoutFeedback","useRef","useState","useSelect","useDispatch","createBlock","KeyboardAwareFlatList","WIDE_ALIGNMENTS","alignmentHelpers","__","styles","BlockListAppender","BlockListItem","BlockListItemCell","BlockListProvider","DEFAULT_BLOCK_LIST_CONTEXT","BlockDraggableWrapper","useEditorWrapperStyles","store","blockEditorStore","identity","x","stylesMemo","getStyles","isStackedHorizontally","horizontalAlignment","styleName","computedStyles","horizontal","overflowVisible","BlockList","blockWidth","initialBlockWidth","contentResizeMode","contentStyle","filterInnerBlocks","gridProperties","header","marginHorizontal","defaultBlock","marginLeft","marginVertical","marginTop","onAddBlock","onDeleteBlock","orientation","parentWidth","renderAppender","renderFooterAppender","rootClientId","withFooter","blockClientIds","blockCount","blockInsertionPointIsVisible","isReadOnly","isRootList","isFloatingToolbarVisible","maxWidth","isRTL","select","getBlockCount","getBlockHierarchyRootClientId","getBlockOrder","getSelectedBlockClientId","isBlockInsertionPointVisible","getSettings","selectedBlockClientId","rootBlockId","blockOrder","isRTLSetting","maxWidthSetting","readOnly","OS","undefined","insertBlock","clearSelectedBlock","extraData","setBlockWidth","addBlockToEndOfPost","newBlock","scrollViewRef","shouldFlatListPreventAutomaticScroll","shouldShowInnerBlockAppender","length","getExtraData","current","onLayout","nativeEvent","layout","layoutWidth","Math","floor","width","min","renderItem","item","clientId","index","isGridItem","gridItemProps","numOfColumns","numColumns","tileCount","tileIndex","indexOf","blockToolbar","headerToolbar","floatingToolbar","containerStyle","flex","isContentStretch","isMultiBlocks","isWider","extraScrollHeight","height","scrollRef","onScroll","removeClippedSubviews","ref","horizontalContentContainer","horizontalContentContainerStretch","horizontalContentContainerCenter","map","currentClientId","innerAppender","Footer","paragraphBlock","blockListFooter","EmptyList","shouldShowInsertionPoint","getBlockInsertionPoint","insertionPoint","align","alignments","full","wrapperStyles","containerStyles","defaultAppender"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Platform, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useState } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tKeyboardAwareFlatList,\n\tWIDE_ALIGNMENTS,\n\talignmentHelpers,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport BlockListAppender from '../block-list-appender';\nimport BlockListItem from './block-list-item';\nimport BlockListItemCell from './block-list-item-cell';\nimport {\n\tBlockListProvider,\n\tDEFAULT_BLOCK_LIST_CONTEXT,\n} from './block-list-context';\nimport { BlockDraggableWrapper } from '../block-draggable';\nimport { useEditorWrapperStyles } from '../../hooks/use-editor-wrapper-styles';\nimport { store as blockEditorStore } from '../../store';\n\nconst identity = ( x ) => x;\n\nconst stylesMemo = {};\nconst getStyles = ( isStackedHorizontally, horizontalAlignment ) => {\n\tconst styleName = `${ isStackedHorizontally }-${ horizontalAlignment }`;\n\tif ( stylesMemo[ styleName ] ) {\n\t\treturn stylesMemo[ styleName ];\n\t}\n\tconst computedStyles = [\n\t\tisStackedHorizontally && styles.horizontal,\n\t\thorizontalAlignment && styles[ `is-aligned-${ horizontalAlignment }` ],\n\t\tstyles.overflowVisible,\n\t];\n\tstylesMemo[ styleName ] = computedStyles;\n\treturn computedStyles;\n};\n\nexport default function BlockList( {\n\tblockWidth: initialBlockWidth,\n\tcontentResizeMode,\n\tcontentStyle,\n\tfilterInnerBlocks,\n\tgridProperties,\n\theader,\n\thorizontal,\n\thorizontalAlignment,\n\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\tmarginVertical = styles.defaultBlock.marginTop,\n\tonAddBlock,\n\tonDeleteBlock,\n\torientation,\n\tparentWidth,\n\trenderAppender,\n\trenderFooterAppender,\n\trootClientId,\n\twithFooter = true,\n} ) {\n\tconst {\n\t\tblockClientIds,\n\t\tblockCount,\n\t\tblockInsertionPointIsVisible,\n\t\tisReadOnly,\n\t\tisRootList,\n\t\tisFloatingToolbarVisible,\n\t\tisStackedHorizontally,\n\t\tmaxWidth,\n\t\tisRTL,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockHierarchyRootClientId,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetSettings,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst rootBlockId = getBlockHierarchyRootClientId(\n\t\t\t\tselectedBlockClientId\n\t\t\t);\n\n\t\t\tlet blockOrder = getBlockOrder( rootClientId );\n\t\t\t// Display only block which fulfill the condition in passed `filterInnerBlocks` function.\n\t\t\tif ( filterInnerBlocks ) {\n\t\t\t\tblockOrder = filterInnerBlocks( blockOrder );\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tisRTL: isRTLSetting,\n\t\t\t\tmaxWidth: maxWidthSetting,\n\t\t\t\treadOnly,\n\t\t\t} = getSettings();\n\n\t\t\treturn {\n\t\t\t\tblockClientIds: blockOrder,\n\t\t\t\tblockCount: getBlockCount(),\n\t\t\t\tblockInsertionPointIsVisible:\n\t\t\t\t\tPlatform.OS === 'ios' && isBlockInsertionPointVisible(),\n\t\t\t\tisReadOnly: readOnly,\n\t\t\t\tisRootList: rootClientId === undefined,\n\t\t\t\tisFloatingToolbarVisible:\n\t\t\t\t\t!! selectedBlockClientId && !! getBlockCount( rootBlockId ),\n\t\t\t\tisStackedHorizontally: orientation === 'horizontal',\n\t\t\t\tmaxWidth: maxWidthSetting,\n\t\t\t\tisRTL: isRTLSetting,\n\t\t\t};\n\t\t},\n\t\t[ filterInnerBlocks, orientation, rootClientId ]\n\t);\n\n\tconst { insertBlock, clearSelectedBlock } = useDispatch( blockEditorStore );\n\n\tconst extraData = useRef( {\n\t\tparentWidth,\n\t\trenderFooterAppender,\n\t\trenderAppender,\n\t\tonDeleteBlock,\n\t\tcontentStyle,\n\t} );\n\n\tconst [ blockWidth, setBlockWidth ] = useState( initialBlockWidth || 0 );\n\n\tconst addBlockToEndOfPost = ( newBlock ) => {\n\t\tinsertBlock( newBlock, blockCount );\n\t};\n\n\tconst scrollViewRef = useRef( null );\n\n\tconst shouldFlatListPreventAutomaticScroll = () =>\n\t\tblockInsertionPointIsVisible;\n\n\tconst shouldShowInnerBlockAppender = () =>\n\t\trenderAppender && blockClientIds.length > 0;\n\n\tconst getExtraData = () => {\n\t\tif (\n\t\t\textraData.current.parentWidth !== parentWidth ||\n\t\t\textraData.current.renderFooterAppender !== renderFooterAppender ||\n\t\t\textraData.current.onDeleteBlock !== onDeleteBlock ||\n\t\t\textraData.current.contentStyle !== contentStyle ||\n\t\t\textraData.current.renderAppender !== renderAppender ||\n\t\t\textraData.current.blockWidth !== blockWidth ||\n\t\t\textraData.current.gridProperties !== gridProperties\n\t\t) {\n\t\t\textraData.current = {\n\t\t\t\tparentWidth,\n\t\t\t\trenderFooterAppender,\n\t\t\t\tonDeleteBlock,\n\t\t\t\tcontentStyle,\n\t\t\t\trenderAppender,\n\t\t\t\tblockWidth,\n\t\t\t\tgridProperties,\n\t\t\t};\n\t\t}\n\t\treturn extraData.current;\n\t};\n\n\tconst onLayout = ( { nativeEvent } ) => {\n\t\tconst { layout } = nativeEvent;\n\n\t\tconst layoutWidth = Math.floor( layout.width );\n\t\tif ( isRootList && blockWidth !== layoutWidth ) {\n\t\t\tsetBlockWidth( Math.min( layoutWidth, maxWidth ) );\n\t\t} else if ( ! isRootList && ! blockWidth ) {\n\t\t\tsetBlockWidth( Math.min( layoutWidth, maxWidth ) );\n\t\t}\n\t};\n\n\tconst renderItem = ( { item: clientId, index } ) => {\n\t\t// Extracting the grid item properties here to avoid\n\t\t// re-renders in the blockListItem component.\n\t\tconst isGridItem = !! gridProperties;\n\t\tconst gridItemProps = gridProperties && {\n\t\t\tnumOfColumns: gridProperties.numColumns,\n\t\t\ttileCount: blockClientIds.length,\n\t\t\ttileIndex: blockClientIds.indexOf( clientId ),\n\t\t};\n\t\treturn (\n\t\t\t<BlockListItem\n\t\t\t\tindex={ index }\n\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tparentWidth={ parentWidth }\n\t\t\t\tcontentResizeMode={ contentResizeMode }\n\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\tonAddBlock={ onAddBlock }\n\t\t\t\tmarginVertical={ marginVertical }\n\t\t\t\tmarginHorizontal={ marginHorizontal }\n\t\t\t\tonDeleteBlock={ onDeleteBlock }\n\t\t\t\tshouldShowInnerBlockAppender={ shouldShowInnerBlockAppender }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\tisGridItem={ isGridItem }\n\t\t\t\t{ ...gridItemProps }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst { blockToolbar, headerToolbar, floatingToolbar } = styles;\n\n\tconst containerStyle = {\n\t\tflex: isRootList ? 1 : 0,\n\t\t// We set negative margin in the parent to remove the edge spacing between parent block and child block in ineer blocks.\n\t\tmarginVertical: isRootList ? 0 : -marginVertical,\n\t\tmarginHorizontal: isRootList ? 0 : -marginHorizontal,\n\t};\n\n\tconst isContentStretch = contentResizeMode === 'stretch';\n\tconst isMultiBlocks = blockClientIds.length > 1;\n\tconst { isWider } = alignmentHelpers;\n\tconst extraScrollHeight =\n\t\theaderToolbar.height +\n\t\tblockToolbar.height +\n\t\t( isFloatingToolbarVisible ? floatingToolbar.height : 0 );\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ containerStyle }\n\t\t\tonAccessibilityEscape={ clearSelectedBlock }\n\t\t\tonLayout={ onLayout }\n\t\t\ttestID=\"block-list-wrapper\"\n\t\t>\n\t\t\t{ isRootList ? (\n\t\t\t\t<BlockListProvider\n\t\t\t\t\tvalue={ {\n\t\t\t\t\t\t...DEFAULT_BLOCK_LIST_CONTEXT,\n\t\t\t\t\t\tscrollRef: scrollViewRef.current,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<BlockDraggableWrapper isRTL={ isRTL }>\n\t\t\t\t\t\t{ ( { onScroll } ) => (\n\t\t\t\t\t\t\t<KeyboardAwareFlatList\n\t\t\t\t\t\t\t\t{ ...( Platform.OS === 'android'\n\t\t\t\t\t\t\t\t\t? { removeClippedSubviews: false }\n\t\t\t\t\t\t\t\t\t: {} ) } // Disable clipping on Android to fix focus losing. See https://github.com/wordpress-mobile/gutenberg-mobile/pull/741#issuecomment-472746541\n\t\t\t\t\t\t\t\taccessibilityLabel=\"block-list\"\n\t\t\t\t\t\t\t\tinnerRef={ ( ref ) => {\n\t\t\t\t\t\t\t\t\tscrollViewRef.current = ref;\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\textraScrollHeight={ extraScrollHeight }\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\t\t\t\tscrollViewStyle={ { flex: 1 } }\n\t\t\t\t\t\t\t\textraData={ getExtraData() }\n\t\t\t\t\t\t\t\tscrollEnabled={ isRootList }\n\t\t\t\t\t\t\t\tcontentContainerStyle={ [\n\t\t\t\t\t\t\t\t\thorizontal &&\n\t\t\t\t\t\t\t\t\t\tstyles.horizontalContentContainer,\n\t\t\t\t\t\t\t\t\tisWider( blockWidth, 'medium' ) &&\n\t\t\t\t\t\t\t\t\t\t( isContentStretch && isMultiBlocks\n\t\t\t\t\t\t\t\t\t\t\t? styles.horizontalContentContainerStretch\n\t\t\t\t\t\t\t\t\t\t\t: styles.horizontalContentContainerCenter ),\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\tdata={ blockClientIds }\n\t\t\t\t\t\t\t\tkeyExtractor={ identity }\n\t\t\t\t\t\t\t\trenderItem={ renderItem }\n\t\t\t\t\t\t\t\tCellRendererComponent={ BlockListItemCell }\n\t\t\t\t\t\t\t\tshouldPreventAutomaticScroll={\n\t\t\t\t\t\t\t\t\tshouldFlatListPreventAutomaticScroll\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tListHeaderComponent={ header }\n\t\t\t\t\t\t\t\tListEmptyComponent={\n\t\t\t\t\t\t\t\t\t! isReadOnly && (\n\t\t\t\t\t\t\t\t\t\t<EmptyList\n\t\t\t\t\t\t\t\t\t\t\torientation={ orientation }\n\t\t\t\t\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tListFooterComponent={\n\t\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\t\taddBlockToEndOfPost={\n\t\t\t\t\t\t\t\t\t\t\taddBlockToEndOfPost\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisReadOnly={ isReadOnly }\n\t\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twithFooter={ withFooter }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonScroll={ onScroll }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockDraggableWrapper>\n\t\t\t\t</BlockListProvider>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{ blockClientIds.length > 0 ? (\n\t\t\t\t\t\t<View style={ [ { flex: 0 }, styles.overflowVisible ] }>\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t...getStyles(\n\t\t\t\t\t\t\t\t\t\tisStackedHorizontally,\n\t\t\t\t\t\t\t\t\t\thorizontalAlignment\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\thorizontal &&\n\t\t\t\t\t\t\t\t\t\tstyles.horizontalContentContainer,\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockClientIds.map(\n\t\t\t\t\t\t\t\t\t( currentClientId, index ) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<View key={ currentClientId }>\n\t\t\t\t\t\t\t\t\t\t\t\t{ renderItem( {\n\t\t\t\t\t\t\t\t\t\t\t\t\titem: currentClientId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\taddBlockToEndOfPost={ addBlockToEndOfPost }\n\t\t\t\t\t\t\t\t\tisReadOnly={ isReadOnly }\n\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twithFooter={ withFooter }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EmptyList\n\t\t\t\t\t\t\torientation={ orientation }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\t\trenderFooterAppender={ renderFooterAppender }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ shouldShowInnerBlockAppender() && (\n\t\t\t\t<View\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tmarginHorizontal:\n\t\t\t\t\t\t\tmarginHorizontal - styles.innerAppender.marginLeft,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<BlockListAppender\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\tshowSeparator\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nfunction Footer( {\n\taddBlockToEndOfPost,\n\tisReadOnly,\n\trenderFooterAppender,\n\twithFooter,\n} ) {\n\tif ( ! isReadOnly && withFooter ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\taccessibilityLabel={ __( 'Add paragraph block' ) }\n\t\t\t\t\ttestID={ __( 'Add paragraph block' ) }\n\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\tconst paragraphBlock = createBlock( 'core/paragraph' );\n\t\t\t\t\t\taddBlockToEndOfPost( paragraphBlock );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles.blockListFooter } />\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</>\n\t\t);\n\t} else if ( renderFooterAppender ) {\n\t\treturn <View>{ renderFooterAppender() }</View>;\n\t}\n\n\treturn null;\n}\n\nfunction EmptyList( {\n\torientation,\n\trenderAppender,\n\trenderFooterAppender,\n\trootClientId,\n} ) {\n\tconst { shouldShowInsertionPoint } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = select( blockEditorStore );\n\n\t\tconst isStackedHorizontally = orientation === 'horizontal';\n\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst blockInsertionPointIsVisible = isBlockInsertionPointVisible();\n\n\t\treturn {\n\t\t\tshouldShowInsertionPoint:\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// If list is empty, show the insertion point (via the default appender)\n\t\t\t\t( blockClientIds.length === 0 ||\n\t\t\t\t\t// Or if the insertion point is right before the denoted block.\n\t\t\t\t\t! blockClientIds[ insertionPoint.index ] ),\n\t\t};\n\t} );\n\tconst align = renderAppender ? WIDE_ALIGNMENTS.alignments.full : undefined;\n\tconst [ wrapperStyles ] = useEditorWrapperStyles( { align } );\n\n\tif ( renderFooterAppender || renderAppender === false ) {\n\t\treturn null;\n\t}\n\n\tconst containerStyles = [ styles.defaultAppender, wrapperStyles ];\n\n\treturn (\n\t\t<View style={ containerStyles }>\n\t\t\t<BlockListAppender\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\tshowSeparator={ shouldShowInsertionPoint }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n"]}