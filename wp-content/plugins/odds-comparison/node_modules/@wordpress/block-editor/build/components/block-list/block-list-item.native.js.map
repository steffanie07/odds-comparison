{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block-list-item.native.js"],"names":["BlockListItemContent","blockWidth","clientId","contentResizeMode","contentStyle","index","isStackedHorizontally","marginHorizontal","marginVertical","onAddBlock","onDeleteBlock","parentWidth","rootClientId","shouldShowInnerBlockAppender","blockAlignment","blockName","hasParents","parentBlockAlignment","parentBlockName","shouldShowInsertionPointAfter","shouldShowInsertionPointBefore","select","getBlockAttributes","getBlockInsertionPoint","getBlockName","getBlockOrder","isBlockInsertionPointVisible","blockEditorStore","blockClientIds","insertionPoint","insertionPointVisibleInCurrentRoot","isListEmpty","length","isInsertionPointBeforeBlock","isInsertionPointAtEnd","isBlockLastInList","showInsertionPointBefore","showInsertionPointAfter","blockHasParents","name","parentName","align","parentBlockAlign","wrapperStyles","margin","shouldShowBlockInsertionPointAfter","BlockListItem","props","isGridItem","numOfColumns","tileCount","tileIndex","restProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Block from './block';\nimport Grid from './grid-item';\nimport BlockInsertionPoint from './insertion-point';\nimport { store as blockEditorStore } from '../../store';\nimport { useEditorWrapperStyles } from '../../hooks/use-editor-wrapper-styles';\n\n/**\n * BlockListItemContent component. Renders a block with an optional insertion point.\n *\n * @param {Object}   props                              Component properties.\n * @param {number}   props.blockWidth                   The width of the block.\n * @param {string}   props.clientId                     The block client ID.\n * @param {string}   props.contentResizeMode            The content resize mode, e.g \"stretch\".\n * @param {Object}   props.contentStyle                 Styles for the block content\n * @param {Object}   props.index                        Block item index\n * @param {boolean}  props.isStackedHorizontally        Whether the block is stacked horizontally.\n * @param {number}   props.marginHorizontal             The horizontal margin.\n * @param {number}   props.marginVertical               The vertical margin.\n * @param {Function} props.onAddBlock                   On add block callback.\n * @param {Function} props.onDeleteBlock                On delete block callback.\n * @param {number}   props.parentWidth                  The width of the parent block.\n * @param {string}   props.rootClientId                 The root client ID.\n * @param {Function} props.shouldShowInnerBlockAppender Whether to show the inner block appender.\n *\n * @return {WPComponent} The rendered block list item content.\n */\nfunction BlockListItemContent( {\n\tblockWidth,\n\tclientId,\n\tcontentResizeMode,\n\tcontentStyle,\n\tindex,\n\tisStackedHorizontally,\n\tmarginHorizontal,\n\tmarginVertical,\n\tonAddBlock,\n\tonDeleteBlock,\n\tparentWidth,\n\trootClientId,\n\tshouldShowInnerBlockAppender,\n} ) {\n\tconst {\n\t\tblockAlignment,\n\t\tblockName,\n\t\thasParents,\n\t\tparentBlockAlignment,\n\t\tparentBlockName,\n\t\tshouldShowInsertionPointAfter,\n\t\tshouldShowInsertionPointBefore,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\n\t\t\tconst insertionPointVisibleInCurrentRoot =\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tisBlockInsertionPointVisible() &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId;\n\n\t\t\tconst isListEmpty = blockClientIds.length === 0;\n\t\t\tconst isInsertionPointBeforeBlock =\n\t\t\t\tblockClientIds[ insertionPoint.index ] === clientId;\n\t\t\tconst isInsertionPointAtEnd =\n\t\t\t\tblockClientIds.length === insertionPoint.index;\n\t\t\tconst isBlockLastInList =\n\t\t\t\tblockClientIds[ insertionPoint.index - 1 ] === clientId;\n\n\t\t\tconst showInsertionPointBefore =\n\t\t\t\tinsertionPointVisibleInCurrentRoot &&\n\t\t\t\t( isListEmpty || isInsertionPointBeforeBlock );\n\n\t\t\tconst showInsertionPointAfter =\n\t\t\t\tinsertionPointVisibleInCurrentRoot &&\n\t\t\t\tisInsertionPointAtEnd &&\n\t\t\t\tisBlockLastInList;\n\n\t\t\tconst blockHasParents = !! rootClientId;\n\t\t\tconst name = getBlockName( clientId );\n\t\t\tconst parentName = getBlockName( rootClientId );\n\t\t\tconst { align } = getBlockAttributes( clientId ) || {};\n\t\t\tconst { align: parentBlockAlign } =\n\t\t\t\tgetBlockAttributes( rootClientId ) || {};\n\n\t\t\treturn {\n\t\t\t\tblockAlignment: align,\n\t\t\t\tblockName: name,\n\t\t\t\thasParents: blockHasParents,\n\t\t\t\tparentBlockAlignment: parentBlockAlign,\n\t\t\t\tparentBlockName: parentName,\n\t\t\t\tshouldShowInsertionPointAfter: showInsertionPointAfter,\n\t\t\t\tshouldShowInsertionPointBefore: showInsertionPointBefore,\n\t\t\t};\n\t\t},\n\t\t[ isStackedHorizontally, rootClientId, clientId ]\n\t);\n\n\tconst [ wrapperStyles, margin ] = useEditorWrapperStyles( {\n\t\talign: blockAlignment,\n\t\tblockName,\n\t\tblockWidth,\n\t\tcontentResizeMode,\n\t\thasParents,\n\t\tmarginHorizontal,\n\t\tparentBlockAlignment,\n\t\tparentBlockName,\n\t\tparentWidth,\n\t} );\n\n\tconst shouldShowBlockInsertionPointAfter =\n\t\t! shouldShowInnerBlockAppender() && shouldShowInsertionPointAfter;\n\n\treturn (\n\t\t<View style={ wrapperStyles }>\n\t\t\t{ shouldShowInsertionPointBefore && (\n\t\t\t\t<BlockInsertionPoint\n\t\t\t\t\ttestID={ `block-insertion-point-before-row-${ index + 1 }` }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<Block\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\tmarginHorizontal={ margin }\n\t\t\t\tmarginVertical={ marginVertical }\n\t\t\t\tonAddBlock={ onAddBlock }\n\t\t\t\tparentBlockAlignment={ parentBlockAlignment }\n\t\t\t\tonDeleteBlock={ onDeleteBlock }\n\t\t\t\tparentWidth={ parentWidth }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t/>\n\t\t\t{ shouldShowBlockInsertionPointAfter && (\n\t\t\t\t<BlockInsertionPoint\n\t\t\t\t\ttestID={ `block-insertion-point-after-row-${ index + 1 }` }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\n/**\n * BlockListItem component. Renders a block list item either as a grid item or as a standalone item.\n *\n * @param {Object}   props                              Component properties.\n * @param {boolean}  props.isGridItem                   Whether the block is a grid item.\n * @param {number}   props.numOfColumns                 The number of columns for grid layout.\n * @param {number}   props.parentWidth                  The width of the parent block.\n * @param {number}   props.tileCount                    The total number of tiles in the grid.\n * @param {number}   props.tileIndex                    The index of the current tile in the grid.\n * @param {number}   props.blockWidth                   The width of the block.\n * @param {string}   props.clientId                     The block client ID.\n * @param {string}   props.contentResizeMode            The content resize mode, e.g \"stretch\".\n * @param {Object}   props.contentStyle                 Styles for the block content\n * @param {Object}   props.index                        Block item index\n * @param {boolean}  props.isStackedHorizontally        Whether the block is stacked horizontally.\n * @param {number}   props.marginHorizontal             The horizontal margin.\n * @param {number}   props.marginVertical               The vertical margin.\n * @param {Function} props.onAddBlock                   On add block callback.\n * @param {Function} props.onDeleteBlock                On delete block callback.\n * @param {string}   props.rootClientId                 The root client ID.\n * @param {Function} props.shouldShowInnerBlockAppender Whether to show the inner block appender.\n *\n * @return {WPComponent|null} The rendered block list item or null if the block width is not provided.\n */\nfunction BlockListItem( props ) {\n\tconst { isGridItem, numOfColumns, tileCount, tileIndex, ...restProps } =\n\t\tprops;\n\n\tif ( ! props?.blockWidth ) {\n\t\treturn null;\n\t}\n\n\tif ( isGridItem ) {\n\t\treturn (\n\t\t\t<Grid\n\t\t\t\tmaxWidth={ props?.parentWidth }\n\t\t\t\tnumOfColumns={ numOfColumns }\n\t\t\t\ttileCount={ tileCount }\n\t\t\t\tindex={ tileIndex }\n\t\t\t>\n\t\t\t\t<BlockListItemContent { ...restProps } />\n\t\t\t</Grid>\n\t\t);\n\t}\n\n\treturn <BlockListItemContent { ...restProps } />;\n}\n\nexport default BlockListItem;\n"]}